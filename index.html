<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Social Grouping Solver">
    <title>Good-Enough Golfers</title>

    <link rel="stylesheet" href="index.css"/>
    <script src="https://cdn.jsdelivr.net/npm/immutable@3.8.2/dist/immutable.min.js"></script>
    <script src="index.js" type="text/javascript"></script>
</head>
<body>
    <div id="controls">
        <h1>Supa Grupa</h1>
        <div>
            <div class="help-text">
                Click the "Recompute" button to get a new solution.
                <br />Customize group size, number of groups and number of
                rounds with the sliders.
                <br />Solutions with more rounds and larger groups take longer
                to compute.
                <br />"Use Group Leaders?" keeps the first <em>N</em> students
                with their respective groups.
            </div>
        </div>
        <button type="button" id="recomputeButton" aria-label="Recompute schedule">Recompute!</button>
        <table>
            <tbody>
            <tr>
                <th scope="row">Number of groups</th>
                <td class="sliderLabel">
                  <input type="text" id="groupsBox" value="5" aria-label="Number of groups" />
                </td>
                <td>
                    <input id="groupsSlider" type="range" min="1" max="50" step="1" value="5" aria-label="Number of groups slider"/>
                </td>
            </tr>
            <tr>
                <th scope="row">People per group</th>
                <td class="sliderLabel">
                  <input type="text" id="ofSizeBox" value="4" aria-label="People per group" />
                </td>
                <td>
                    <input id="ofSizeSlider" type="range" min="2" max="15" step="1" value="4" aria-label="People per group slider"/>
                </td>
            </tr>
            <tr>
                <th scope="row">Number of rounds</th>
                <td class="sliderLabel">
                  <input type="text" id="forRoundsBox" value="5" aria-label="Number of rounds" />
                </td>
                <td>
                    <input id="forRoundsSlider" type="range" min="1" max="20" step="1" value="5" aria-label="Number of rounds slider"/>
                </td>
            </tr>
            <tr>
              <th scope="row">Use group leaders?</th>
              <td class="sliderLabel">
                <input id="withGroupLeadersBox" type="checkbox" aria-label="Use group leaders" />
              </td>
              <td>&nbsp;</td>
            </tr>
            </tbody>
        </table>
        <div>
            <div>
                <strong>Player Names</strong>
            </div>
            <div class="help-text">
                Student names can be provided for convenience.
                <br />Editing student names will update the current solution in
                real-time; you don't need to click "Recompute."
                <br />&nbsp;
                <br /><strong>Privacy:</strong> Names are never sent to our
                servers. All processing happens on your own computer.
                <br />&nbsp;
                <br />If two students have the same name, additional constraints
                (below) will apply to both of them.
                <br />&nbsp;
            </div>
            <div>
                <textarea id="playerNames" rows="21" aria-label="Student names, one per line">
Alleson
Brad
Charlie
Danielle
Fredric
George
Harriet
Ivan
Jenny
Karen
Laura
Mona
Nathan
Olive
Penelope
Rockey
Stan
Tom
</textarea>
            </div>
        </div>
        <div>
            <div>
                <strong>Never allow these pairs</strong>
            </div>
            <div class="help-text">
                Studentss grouped in this box are never grouped by the solver
                unless absolutely necessary.
                <br />Comma-separate names within a group.
                <br />Put groups on separate lines.
            </div>
            <div>
                <textarea id="forbiddenPairs" rows="6" aria-label="Forbidden pairs, comma-separated, one group per line">
Rockey, Ivan
</textarea>
            </div>
        </div>
        <div>
            <div>
                <strong>Prefer splitting these groups</strong>
            </div>
            <div class="help-text">
                Similar to above, but lower priority.
                The solver avoids grouping players if they're already
                grouped here, but reducing repeat encounters can take
                priority in later rounds.
                <br />Tip: You can encourage the solver to gender-balance
                groups by listing all players of one gender in a group here.
            </div>
            <div>
                <textarea id="discouragedGroups" rows="6" aria-label="Discouraged groups, comma-separated, one group per line">
Brad,Ivan,Mona,Stan
</textarea>
            </div>
        </div>
        <div>
            <div class="help-text">
                The <strong>conflict score</strong> is a representation of how
                far the solution is from perfect - lower is better.
                <br />The <strong>Download CSV</strong> button provides a pivot
                view of the solution that makes it easier see the sequence of
                groups for a given player.
                <br />&nbsp;
                <br /><a href="javascript:hideHelp()">Close help.</a>
            </div>
        </div>
        <p>
            <em>Supa Grupa</em> is adapted from Buchanan's near-solver for a class of scheduling problems including the
            <a href="http://mathworld.wolfram.com/SocialGolferProblem.html">Social Golfer Problem</a>
            and
            <a href="http://mathworld.wolfram.com/KirkmansSchoolgirlProblem.html">Kirkman's Schoolgirl Problem</a>.
            The goal is to schedule <tt>g x p</tt> players into <tt>g</tt> groups of size <tt>p</tt> for
            <tt>w</tt> weeks such that no two players meet more than once.
        <p>
            <a href="http://bradleycbuchanan.com">B Buchanan</a>, 2017
            -
            <a href="https://github.com/islemaster/good-enough-golfers">View Source</a>
            -
            <a id="show-help-link" href="javascript:showHelp()">Help</a>
            <a id="hide-help-link" href="javascript:hideHelp()">Close Help</a>
        </p>
    </div>
    <div id="results">

    </div>
</body>
</html>
